function f(o,t,e,u,i,s,l,n){var a=typeof o=="function"?o.options:o;t&&(a.render=t,a.staticRenderFns=e,a._compiled=!0),u&&(a.functional=!0),s&&(a._scopeId="data-v-"+s);var c;if(l?(c=function(r){r=r||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!r&&typeof __VUE_SSR_CONTEXT__<"u"&&(r=__VUE_SSR_CONTEXT__),i&&i.call(this,r),r&&r._registeredComponents&&r._registeredComponents.add(l)},a._ssrRegister=c):i&&(c=n?function(){i.call(this,(a.functional?this.parent:this).$root.$options.shadowRoot)}:i),c)if(a.functional){a._injectStyles=c;var v=a.render;a.render=function(b,p){return c.call(p),v(b,p)}}else{var d=a.beforeCreate;a.beforeCreate=d?[].concat(d,c):[c]}return{exports:o,options:a}}const _={mixins:[Fieldtype],data(){var o;return{attributes:[],groups:this.initializeGroups(),globalConjunction:((o=this.value)==null?void 0:o.globalConjunction)||"AND",operators:["AND","OR"],compareOperators:["=","!=",">","<",">=","<=","IN","NOT IN"]}},methods:{initializeGroups(){var o,t;return(t=(o=this.value)==null?void 0:o.groups)!=null&&t.length?this.value.groups:[{conjunction:"AND",conditions:[]}]},async fetchAttributes(){try{const o=await this.$axios.get("/cp/rapidez/product-attributes");this.attributes=o.data.map(t=>({label:t.attribute_code,value:t.attribute_code,attribute_id:t.attribute_id,type:t.frontend_input,options:t.options}))}catch(o){console.error("Error fetching attributes:",o)}},addGroup(){this.groups.push({conjunction:"AND",conditions:[]}),this.updateValue()},removeGroup(o){this.groups.splice(o,1),this.groups.length===0&&this.addGroup(),this.updateValue()},addConditionToGroup(o){this.groups[o].conditions.push({attribute:"",operator:"=",value:""}),this.updateValue()},removeCondition(o,t){this.groups[o].conditions.splice(t,1),this.updateValue()},updateCondition(o,t){this.updateValue()},updateValue(){this.$emit("input",{groups:this.groups,globalConjunction:this.globalConjunction})}},mounted(){this.fetchAttributes()}};var C=function(){var t=this,e=t._self._c;return e("div",{staticClass:"product-query-builder"},[e("div",{staticClass:"flex items-center justify-between mb-4"},[e("h2",{staticClass:"text-lg font-bold"},[t._v("Product Query Builder")]),e("button",{staticClass:"btn-primary",on:{click:t.addGroup}},[t._v("Add Group")])]),e("div",{staticClass:"space-y-6"},[t._l(t.groups,function(u,i){return e("div",{key:i,staticClass:"border border-gray-300 rounded-lg p-4"},[e("div",{staticClass:"flex items-center justify-between mb-4 pb-2 border-b border-gray-200"},[e("div",{staticClass:"flex items-center space-x-4"},[e("h3",{staticClass:"text-base font-bold"},[t._v("Group "+t._s(i+1))]),e("v-select",{staticClass:"w-32",attrs:{options:t.operators},on:{input:t.updateValue},model:{value:u.conjunction,callback:function(s){t.$set(u,"conjunction",s)},expression:"group.conjunction"}})],1),e("div",{staticClass:"flex items-center space-x-2"},[e("button",{staticClass:"btn",on:{click:function(s){return t.addConditionToGroup(i)}}},[t._v("Add Condition")]),e("button",{staticClass:"btn-danger",on:{click:function(s){return t.removeGroup(i)}}},[t._v("Remove Group")])])]),e("div",{staticClass:"space-y-3"},[t._l(u.conditions,function(s,l){return e("div",{key:l,staticClass:"flex items-center space-x-4 p-3 bg-gray-50 rounded-md"},[e("v-select",{staticClass:"w-1/3",attrs:{options:t.attributes,reduce:n=>n.value,label:"label",placeholder:"Select Attribute"},on:{input:function(n){return t.updateCondition(i,l)}},model:{value:s.attribute,callback:function(n){t.$set(s,"attribute",n)},expression:"condition.attribute"}}),e("v-select",{staticClass:"w-1/4",attrs:{options:t.compareOperators,placeholder:"Select Operator"},on:{input:function(n){return t.updateCondition(i,l)}},model:{value:s.operator,callback:function(n){t.$set(s,"operator",n)},expression:"condition.operator"}}),e("input",{directives:[{name:"model",rawName:"v-model",value:s.value,expression:"condition.value"}],staticClass:"input-text flex-1",attrs:{type:"text",placeholder:"Enter Value"},domProps:{value:s.value},on:{input:[function(n){n.target.composing||t.$set(s,"value",n.target.value)},function(n){return t.updateCondition(i,l)}]}}),e("button",{staticClass:"btn-danger flex items-center justify-center w-8 h-8 rounded-full",on:{click:function(n){return t.removeCondition(i,l)}}},[e("span",{staticClass:"text-lg"},[t._v("Ã—")])])],1)}),u.conditions.length?t._e():e("div",{staticClass:"text-center py-4 text-gray-500"},[t._v(' No conditions added yet. Click "Add Condition" to start building your query. ')])],2)])}),t.groups.length?t._e():e("div",{staticClass:"text-center py-8 bg-gray-50 rounded-lg"},[e("p",{staticClass:"text-gray-500 mb-4"},[t._v('No groups added yet. Click "Add Group" to start building your query.')]),e("button",{staticClass:"btn-primary",on:{click:t.addGroup}},[t._v("Add First Group")])])],2),t.groups.length>1?e("div",{staticClass:"mt-6 pt-4 border-t border-gray-200"},[e("div",{staticClass:"flex items-center space-x-4"},[e("label",{staticClass:"font-bold"},[t._v("Combine Groups with:")]),e("v-select",{staticClass:"w-32",attrs:{options:t.operators},on:{input:t.updateValue},model:{value:t.globalConjunction,callback:function(u){t.globalConjunction=u},expression:"globalConjunction"}})],1)]):t._e()])},h=[],m=f(_,C,h,!1,null,"4167e613",null,null);const g=m.exports;Statamic.booting(()=>{Statamic.component("product_query_builder-fieldtype",g)});
